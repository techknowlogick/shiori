language: go

services:
  - docker

script:
  - docker build -t techknowlogick/shiori:latest .
  - go get -t -v ./...
  - go vet $(go list ./... | grep -v /vendor/)
  - go build
  - ./shiori add https://example.com
  - ./shiori print

deploy:
  provider: script
  script: bash docker_push
  on:
    branch: master
